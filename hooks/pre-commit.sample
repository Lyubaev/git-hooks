#!/usr/bin/env php
<?php
require __DIR__ . '/../vendor/autoload.php';

$hook = new Elephant\Git_Hooks\Hook();
$hook->addFunction(function (Elephant\Git_Hooks\HookHelper $helper) {
    $helper->sendInfo('My first hook...');

    switch (mt_rand(0, 1)) {
        case 0:
            $helper->sendInfo('Good!');
            break;
        case 1:
            $helper->sendError('Bad!');
            throw new RuntimeException('Very very bad :(');
    }

    $helper->sendInfo('Success!');
});

$hook->addFunction(function (Elephant\Git_Hooks\HookHelper $helper) {
    $helper->sendInfo('Second hook...');

    # Get configuration values...
    $bad = $helper->config['hooks-config']['message'][0];
    $good = $helper->config['hooks-config']['message'][1];

    switch (mt_rand(0, 1)) {
        case 0:
            $helper->sendInfo($good);
            break;
        case 1:
            $helper->sendError($bad);
            throw new RuntimeException('Very very bad :(');
    }

    $helper->sendInfo('Success!');
});

$hook->run();
